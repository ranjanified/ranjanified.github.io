function m(){}function P(t){return t()}function C(){return Object.create(null)}function $(t){t.forEach(P)}function B(t){return typeof t=="function"}function I(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function R(t){return Object.keys(t).length===0}function M(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function U(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function G(){return D("")}function H(t){return Array.from(t.childNodes)}let g;function p(t){g=t}function J(){if(!g)throw new Error("Function called outside component initialization");return g}function K(t){J().$$.on_mount.push(t)}const s=[],N=[];let u=[];const O=[],Q=Promise.resolve();let y=!1;function V(){y||(y=!0,Q.then(T))}function w(t){u.push(t)}const b=new Set;let d=0;function T(){if(d!==0)return;const t=g;do{try{for(;d<s.length;){const e=s[d];d++,p(e),W(e.$$)}}catch(e){throw s.length=0,d=0,e}for(p(null),s.length=0,d=0;N.length;)N.pop()();for(let e=0;e<u.length;e+=1){const n=u[e];b.has(n)||(b.add(n),n())}u.length=0}while(s.length);for(;O.length;)O.pop()();y=!1,b.clear(),p(t)}function W(t){if(t.fragment!==null){t.update(),$(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}function X(t){const e=[],n=[];u.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),u=e}const Y=new Set;function Z(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function tt(t,e,n,i){const{fragment:r,after_update:a}=t.$$;r&&r.m(e,n),i||w(()=>{const c=t.$$.on_mount.map(P).filter(B);t.$$.on_destroy?t.$$.on_destroy.push(...c):$(c),t.$$.on_mount=[]}),a.forEach(w)}function et(t,e){const n=t.$$;n.fragment!==null&&(X(n.after_update),$(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){t.$$.dirty[0]===-1&&(s.push(t),V(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function it(t,e,n,i,r,a,c,h=[-1]){const l=g;p(t);const o=t.$$={fragment:null,ctx:[],props:a,update:m,not_equal:r,bound:C(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:C(),dirty:h,skip_bound:!1,root:e.target||l.$$.root};c&&c(o.root);let E=!1;if(o.ctx=n?n(t,e.props||{},(f,k,...v)=>{const j=v.length?v[0]:k;return o.ctx&&r(o.ctx[f],o.ctx[f]=j)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](j),E&&nt(t,f)),k}):[],o.update(),E=!0,$(o.before_update),o.fragment=i?i(o.ctx):!1,e.target){if(e.hydrate){const f=H(e.target);o.fragment&&o.fragment.l(f),f.forEach(x)}else o.fragment&&o.fragment.c();e.intro&&Z(t.$$.fragment),tt(t,e.target,e.anchor,e.customElement),T()}p(l)}class ot{$destroy(){et(this,1),this.$destroy=m}$on(e,n){if(!B(n))return m;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!R(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function S(t){let e;return{c(){e=U("div"),e.textContent="Build In Progress"},m(n,i){M(n,e,i)},d(n){n&&x(e)}}}function rt(t){let e,n=t[0]&&S();return{c(){n&&n.c(),e=G()},m(i,r){n&&n.m(i,r),M(i,e,r)},p(i,[r]){i[0]?n||(n=S(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:m,o:m,d(i){n&&n.d(i),i&&x(e)}}}function ct(t,e,n){let i=!1;return K(()=>{setTimeout(()=>{dispatchEvent(new CustomEvent("ranjanified:app:loaded")),n(0,i=!0)},3e3)}),[i]}class L extends ot{constructor(e){super(),it(this,e,ct,rt,I,{})}}const _=new URLSearchParams(location.search),q=(t="")=>{const e=_.get("app_target")||_.get("integration_target")||_.get("target_selector")||t;return e!=null&&e.trim()&&document.body.querySelector(e==null?void 0:e.trim())||document.body};var A;const ft=((A=_.get("_instantiate"))==null?void 0:A.toLowerCase())==="true";ft&&new L({target:q()});const at=(t="")=>{new L({target:q(t)})},lt=async()=>await(await fetch("/config/app.json")).json(),dt=(t,e)=>{if(e&&(t!=null&&t.trim()))return e[t==null?void 0:t.trim()]?e[t==null?void 0:t.trim()]:Object.values(e).find(n=>{n.src,t==null||t.trim()})},st=(t,e)=>{t.inline?F(t):z(t,e)},z=(t,e)=>{if(e!=null&&e.trim()){const n=document.createElement("link");n.rel="stylesheet",n.href=e.trim(),t.target==="head"?document.head.appendChild(n):document.body.appendChild(n)}},F=t=>{var e;if((e=t.inline_text)!=null&&e.trim()){const n=document.createElement("style");n.appendChild(document.createTextNode(t.inline_text.trim())),t.target==="head"?document.head.appendChild(n):document.body.appendChild(n)}},ut=t=>{var e;t&&((e=t.assets.entries)==null||e.filter(n=>{var i;return(i=n.name)==null?void 0:i.trim()}).forEach(n=>{var i,r,a,c;if(n.skip_manifest)n.inline?ht(n):pt(n);else{const h=dt(n.name,t.manifest);if(h&&((i=h.file)!=null&&i.trim())){const l=`/${((a=(r=t.assets)==null?void 0:r.path_prefix)==null?void 0:a.trim())??""}/${((c=h.file)==null?void 0:c.trim())??""}`;mt(n,l)}}}))};function ht(t){switch(t.type){case"css":F(t);break}}function pt(t){var e;switch(t.type){case"css":z(t,((e=t.attrs)==null?void 0:e.href)??"");break}}function mt(t,e){switch(console.log("[Manifested Asset]",e),t.type){case"css":st(t,e);break}}const gt=async()=>await(await fetch("/manifest.json")).json(),_t=async t=>{console.log("Bootstrapping Application"),dispatchEvent(new CustomEvent("ranjanified:app:bootstrapping"));const[e,n]=await Promise.all([gt(),lt()]),i={...e,...n.manifest};dispatchEvent(new CustomEvent("ranjanified:app:manifest",{detail:{generated:e,configured:n.manifest,merged:i}})),dispatchEvent(new CustomEvent("ranjanified:app:config",{detail:n})),ut({...n,manifest:i}),at((t==null?void 0:t.target_selector)??"")};export{_t as bootstrap};
